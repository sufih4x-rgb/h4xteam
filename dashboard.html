<!DOCTYPE html>
<html>
<head>
<title>Dashboard - H4XTEAM</title>
<style>
body{background:#000;color:#0affff;font-family:Arial;text-align:center;padding-top:30px}
button{width:80%;padding:15px;margin:10px;font-size:18px;border-radius:8px;border:none;background:#0affff;color:#000;font-weight:bold}
#box{padding:20px;border:1px solid #0affff;margin:20px;border-radius:8px}
</style>
</head>

<body>

<h1>Dashboard</h1>

<div id="box">
  <p id="email"></p>
  <p>Balance: â‚¹<span id="balance">0</span></p>
  <p>VIP Level: <span id="vip">0</span></p>
</div>

<button onclick="go('game.html')">Play Game</button>
<button onclick="go('deposit.html')">Deposit</button>
<button onclick="go('withdraw.html')">Withdraw</button>
<button onclick="go('profile.html')">Profile</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAzfvbiqRqsQwBOOIkegxJD09di-S_tfHg",
  authDomain: "test-eb5e7.firebaseapp.com",
  databaseURL: "https://test-eb5e7-default-rtdb.firebaseio.com",
  projectId: "test-eb5e7",
  storageBucket: "test-eb5e7.appspot.com",
  messagingSenderId: "366282855653",
  appId: "1:366282855653:web:dca7e000f5a22fb11f300c",
  measurementId: "G-ECKCTBLQJ8"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getDatabase(app);

window.go = (p)=>window.location=p;

onAuthStateChanged(auth, async user=>{
 if(!user) return window.location="index.html";

 let snap=await get(ref(db,"users/"+user.uid));

 // Auto logout if device mismatch
 let saved=snap.val().device;
 let now=navigator.userAgent;

 if(saved!==now){
   alert("Logged out because account used on another device");
   signOut(auth);
   return;
 }

 document.getElementById("email").innerText=user.email;
 document.getElementById("balance").innerText=snap.val().balance;
 document.getElementById("vip").innerText=snap.val().vip;
});
</script>

</body>
</html>
