<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<link rel="stylesheet" href="assets/css/neon.css">
</head>

<body>

<div class="nav">
    <a href="dashboard.html">Home</a>
    <a href="deposit.html">Deposit</a>
    <a href="withdraw.html">Withdraw</a>
    <a href="profile.html">Profile</a>
    <a href="settings.html">Settings</a>
</div>

<h1>Welcome to H4XTEAM</h1>

<div class="card">
    <h2>User Stats</h2>
    <p id="email"></p>
    <p id="vip"></p>
    <p id="wins"></p>
    <p id="deposits"></p>
</div>

<script type="module">
import { auth, db } from "./assets/js/firebase.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
import { get, ref } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

onAuthStateChanged(auth, async (user)=>{
    if (!user) window.location.href="index.html";

    const snap = await get(ref(db, "users/" + user.uid));
    const data = snap.val();

    email.innerHTML = "Email: " + data.email;
    vip.innerHTML = "VIP Level: " + data.vip;
    wins.innerHTML = "Wins: " + data.wins;
    deposits.innerHTML = "Deposits: " + data.depositCount;
});
</script>

</body>
</html>
