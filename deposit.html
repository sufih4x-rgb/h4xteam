<script>
// ======= USER BALANCE SYSTEM =======
let userBalance = parseFloat(localStorage.getItem("balance")) || 0;
const balEl = document.getElementById("balanceDisplay");
balEl.innerText = userBalance.toFixed(2);

// Update balance everywhere
function updateBalance(amount) {
    userBalance += amount;
    localStorage.setItem("balance", userBalance);
    balEl.innerText = userBalance.toFixed(2);
}

// ======= GAME LOGIC =======
function playGame(choice) {
    let bet = parseFloat(document.getElementById("betAmount").value);

    // Validate rules
    if (bet < 5) return alert("Minimum bet is ‚Çπ5");
    if (bet > 1000) return alert("Maximum bet is ‚Çπ1000");
    if (bet > userBalance) return alert("You do not have enough balance!");

    updateBalance(-bet); // Deduct bet first

    // Random winner color
    let colors = ["red", "green"];
    let result = colors[Math.floor(Math.random() * 2)];

    const resultBox = document.getElementById("resultBox");

    if (choice === result) {
        let winAmount = bet * 1.9;
        updateBalance(winAmount);
        resultBox.innerHTML = `üéâ You WIN!<br> You get ‚Çπ${winAmount.toFixed(2)} <br> Result: ${result.toUpperCase()}`;
        resultBox.style.color = "lime";
    } else {
        resultBox.innerHTML = `‚ùå You LOST!<br> Lost: ‚Çπ${bet.toFixed(2)} <br> Result: ${result.toUpperCase()}`;
        resultBox.style.color = "red";
    }
}
</script>
